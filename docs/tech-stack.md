
# SubLingo Technology Stack

## Technology Choices

| Category                     | Technology                                           | Version / Details                                  | Description / Purpose                                                                    | Justification (Optional)                                                                                                   |
| :--------------------------- | :--------------------------------------------------- | :------------------------------------------------- | :--------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------- |
| **Project Type** | Kotlin Multiplatform (KMP)                           | Mobile (Android & iOS)                             | Share common logic between Android and iOS, native UI.                                   | Mandated by PRD, utilizes existing `moclam1905/SubLingo` repo.                                                            |
| **Languages** | Kotlin                                               | Latest stable (e.g., 1.9.23+)                      | Primary language for KMP shared logic and Android app development.                       | Modern, expressive, and official language for Android; core of KMP.                                                      |
|                              | Swift                                                | Latest stable (e.g., 5.9+)                         | Primary language for iOS app development.                                                | Apple's modern language for iOS development.                                                                               |
| **KMP Core Libraries** | Kotlinx Coroutines                                   | Latest stable (e.g., 1.8.0+)                       | Asynchronous programming in KMP.                                                         | Essential for non-blocking operations (network, I/O).                                                                      |
|                              | Ktor Client                                          | Latest stable (e.g., 2.3.9+)                       | Networking library for KMP (for OpenAI/OpenRouter API calls).                            | Standard KMP HTTP client, integrates with coroutines & serialization. (Story 1.1)                                        |
|                              | Kotlinx.serialization                                | Latest stable (e.g., 1.6.3+)                       | JSON serialization/deserialization in KMP.                                               | Official Kotlin library for robust serialization. (Story 1.1)                                                              |
|                              | SQLDelight                                           | Latest stable (e.g., 2.0.1+)                       | Generates type-safe Kotlin APIs from SQL for KMP database access.                        | Efficiently queries bundled SQLite offline dictionary; KMP compatible. (Recommended for Story 2.1, 2.2)                    |
|                              | Multiplatform-Settings (by Russell Wolf)             | Latest stable (e.g., 1.1.1+)                       | KMP library for simple key-value storage (SharedPreferences/NSUserDefaults).             | Manages user settings (e.g., "Enable Online Translation" toggle) from shared code.                                       |
| **Android Platform** | Android SDK                                          | Min API 23 (Android 6.0)                           | Target Android operating system version.                                                 | Defined in PRD (UX Goal 2); Story 1.2 `minSdkVersion` is 23.                                                               |
|                              | Jetpack Compose                                      | Latest stable androidx.compose libraries           | Declarative UI framework for Android.                                                    | Mandated by PRD. (Story 1.2)                                                                                               |
|                              | Google ML Kit Text Recognition                       | Latest stable `play-services-mlkit-text-recognition` | On-device OCR for Android.                                                               | Mandated by PRD for OCR. (Story 3.2)                                                                                       |
|                              | Android Native TTS (`android.speech.tts.TextToSpeech`) | OS-provided                                        | Text-to-Speech engine for Android.                                                       | Provides offline US English pronunciation. (Story 2.5)                                                                     |
| **iOS Platform** | iOS SDK                                              | Min iOS 16.0                                       | Target iOS operating system version.                                                     | Defined in PRD (UX Goal 2); Story 1.3 deployment target is 16.0.                                                         |
|                              | SwiftUI                                              | Relevant version for iOS 16+                       | Declarative UI framework for iOS.                                                        | Mandated by PRD. (Story 1.3)                                                                                               |
|                              | Apple Vision Framework (`VNRecognizeTextRequest`)      | OS-provided (iOS 16+)                              | On-device OCR for iOS.                                                                   | Mandated by PRD for OCR; leverages Live Text capabilities. (Story 3.5)                                                     |
|                              | Apple Native TTS (`AVSpeechSynthesizer`)             | OS-provided (iOS 16+)                              | Text-to-Speech engine for iOS.                                                           | Provides offline US English pronunciation. (Story 2.6)                                                                     |
|                              | iOS App Extensions (Action & Share)                  | OS-provided                                        | System integration for sharing text/images to the app.                                   | Core iOS interaction model for SubLingo. (Story 1.5, 1.6)                                                                  |
| **External APIs** | OpenAI API / OpenRouter API                          | GPT-3.5 Turbo (or equivalent)                      | Online sentence translation.                                                             | Mandated by PRD for advanced translation. (Story 4.1)                                                                      |
| **Build & Tooling** | Gradle                                               | Latest stable (e.g., 8.x)                          | Build automation tool for KMP and Android.                                               | Standard for KMP/Android.                                                                                                  |
|                              | Android Studio                                       | Latest stable (e.g., Iguana / Jellyfish+)            | Primary IDE for KMP and Android development.                                             | Recommended IDE.                                                                                                           |
|                              | Xcode                                                | Latest stable (e.g., 15.x / 16.x)                    | Primary IDE for iOS development.                                                         | Required for iOS development.                                                                                              |
| **Version Control** | Git                                                  | N/A                                                | Source code management.                                                                  | Standard for version control.                                                                                              |
|                              | GitHub                                               | N/A                                                | Hosting for the `moclam1905/SubLingo` repository.                                        | Specified in PRD.                                                                                                          |
| **Offline Dictionary Data** | SQLite                                               | Bundled with app (e.g., version 3.x)               | Format for the bundled "lite" offline dictionary.                                        | Recommended in Project Analysis for control and efficient querying via SQLDelight. (Story 2.1 Wiktextract JSONL to SQLite) |

*Note: "Latest stable" versions should be pinned to specific versions at the start of development and updated deliberately.*

## Change Log

| Change        | Date       | Version | Description                                     | Author          |
| :------------ | :--------- | :------ | :---------------------------------------------- | :-------------- |
| Initial draft | 2025-05-15 | 0.1     | Initial draft based on architecture discussion. | Architect Agent |

